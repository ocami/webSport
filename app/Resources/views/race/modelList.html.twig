{% block stylesheets %}
    <style>
        .panel-body .categories {
            height: 6em;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .panel-body {
            padding-bottom: 0em;
            padding-top: 0.5em;
        }

        .panel-body .category {
            height: 6em;
            padding-top: 2em;
            font-weight: bold;
        }

        .panel-body-race h4 {
            text-align: center;
            font-weight: bold;
        }

        .race-description span {
            line-height: 2;
        }

        @media (min-width: 1000px) {
            .race-description {
                font-size: 15px;
                font-weight: bold;
            }
        }

        @media (max-width: 400px) {
            /*.race-description {*/
            /*font-size: 16px;*/
            /*font-weight: bold;*/
            .panel-body {
                padding: 0 0 0 0px;
            }

        }

        .panel-heading img {
            height: 2em;
        }

        .panel-footer img {
            height: 2em;
        }
    </style>

{% endblock %}
<div class="row">
    {% for race in races %}
        <div class="col-xs-12 col-sm-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="panel-title">{{ race.name }} </span>
                    <span class="pull-right">
                        {% if race.valid %}
                            {% if race.inChampionship %}
                                <img src="{{ asset('img/cup.jpg') }}" class="img-circle">
                            {% endif %}

                            {% if race.competitorRegister == 1 %}
                                <img src="{{ asset('img/canRegister.png') }}" class="img-circle">
                            {% endif %}

                            {% if race.competitorRegister == 2 %}
                                <img src="{{ asset('img/race_start.png') }}" class="img-circle">
                            {% endif %}
                        {% endif %}
                    </span>
                </div>
                <div class="panel-body panel-body-race">

                    <h4 style="text-align: center">{{ race.dateTime|localizeddate('none', 'none', 'fr_BR', null, "cccc d MMMM") }}</h4>

                    <div class="row">
                        <div class="col-xs-8 col-lg-7 race-description">
                            <span class="col-xs-7">Départ :</span><span class="col-xs-5"> {{ race.dateTime|date('H') }}
                                H {{ race.dateTime|date('i') }}</span>
                            <span class="col-xs-7">Distance :</span><span class="col-xs-5"> {{ race.distance }}
                                Km</span>
                        </div>

                        <div class="col-xs-4">
                            {% if race.fullCat %}
                                <div class="category">
                                    Toute catégories
                                </div>
                            {% else %}
                                <div class="categories">
                                    {% for category in race.categories %}
                                        <span style="margin-left: 1em">{{ category.name }}</span><br>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="panel-footer">
                    <input type="button" class="btn-xs btn-info" value="Détail"
                           onclick="location.href = '{{ path('race_show', {'id': race.id}) }}';">

                    {% if is_granted('ROLE_COMPETITOR') %}
                        {% if race.valid %}
                            {% if race.competitorRegister == 1 %}
                                <input type="button" class="btn-xs btn-info" value="S'inscrire"
                                       onclick="location.href = '{{ path('app_competitor_addrace', {'race': race.id}) }}';">
                            {% endif %}
                            {% if race.competitorRegister == 2 %}
                                <input type="button" class="btn-xs btn-info" value="Annuler"
                                       onclick="location.href = '{{ path('app_competitor_removerace', {'race': race.id}) }}';">
                            {% endif %}
                        {% endif %}
                    {% endif %}

                    {% if is_granted('ROLE_ORGANIZER') %}
                        {% if race.isOrganizer == true %}
                            <input type="button" class="btn-xs btn-success" value="Editer"
                                   onclick="location.href = '{{ path('race_edit', {'id': race.id}) }}';">

                            {% if race.supervised %}
                                {% if race.valid %}
                                    <img src="{{ asset('img/checked.png ') }}" class="img-circle pull-right">
                                {% else %}
                                    <img src="{{ asset('img/cancel.png ') }}" class="img-circle pull-right">
                                {% endif %}
                            {% else %}
                                <img src="{{ asset('img/question.png ') }}" class="img-circle pull-right">
                            {% endif %}
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>