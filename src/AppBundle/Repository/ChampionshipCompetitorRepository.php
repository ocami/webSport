<?php

namespace AppBundle\Repository;
use AppBundle\Entity\Championship;


/**
 * ChampionshipCompetitorRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ChampionshipCompetitorRepository extends \Doctrine\ORM\EntityRepository
{
    public function competitorsByCategoryOrderByPoints(Championship $championship)
    {
        $cc = $this->createQueryBuilder('cc')
            ->innerJoin('cc.competitor','c')
            ->select('c.code, cc.ranck, cc.points, c.firstName, c.lastName')
            ->where('cc.championship = :championship')
            ->setParameter('championship',$championship->getId())
            ->orderBy('cc.points','DESC')
            ->getQuery()->getResult();

        return $cc;
    }

    public function maFonction()
    {
        $cc = $this->createQueryBuilder('cc')
            ->getQuery()->getResult();

        return $cc;
    }
}
